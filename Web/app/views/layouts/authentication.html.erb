<!DOCTYPE html>
<html>
<head>
  <title>Schpautworken gmbh</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->
  <%= stylesheet_link_tag    "application" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div id="fb-root"></div>
<script>
	window.fbAsyncInit = function() {
	    FB.init({
	      appId      : '341333432594853', // App ID
	      status     : false, // check login status
	      cookie     : true, // enable cookies to allow the server to access the session
	      xfbml      : true  // parse XFBML
	    });

	    // Additional initialization code here
	    $('.fb-login-button').click(function(e) {
	    	FB.getLoginStatus(function(response) {
	    		if (response.authResponse) {
	    			postCallback(response);
	    		}
	    	});

	    	FB.Event.subscribe('auth.login', function(response) {
	    		postCallback(response);
	    	});

	    	function postCallback(response) {
	    		if (response.status=="connected") {
	    			$.post('/users/authenticate', response.authResponse);
	    		}
	    	};
	    });
	};

	// Load the SDK Asynchronously
	(function(d){
		var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
		if (d.getElementById(id)) {return;}
		js = d.createElement('script'); js.id = id; js.async = true;
		js.src = "//connect.facebook.net/en_US/all.js";
		ref.parentNode.insertBefore(js, ref);
	}(document));
</script>


<div class="container">
	<%=flash_message_helper%>
	<%= yield %>
</div>

</body>
</html>